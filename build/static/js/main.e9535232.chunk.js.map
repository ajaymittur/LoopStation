{"version":3,"sources":["styles/modules/controlButton.module.css","assets/tamborine_100bpm.mp3","components/PlayAllButton.js","modules/Sound.js","components/TempoButton.js","components/ClearAllButton.js","components/LoopButton.js","App.js","index.js","styles/modules/loopButton.module.css"],"names":["module","exports","normal","clicked","__webpack_require__","p","PlayAllButton","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleClick","setState","currentState","style","buttonStyle","mode","state","newProps","reset","react_default","a","createElement","type","className","onClick","React","Component","Sound","shouldPlayMetronome","initialize","audio","Audio","tempoAudio","navigator","mediaDevices","getUserMedia","then","audioStream","recorder","MediaRecorder","ondataavailable","e","audioChunks","push","data","onstop","audioBlob","Blob","audioUrl","URL","createObjectURL","console","log","src","audioSrc","loop","catch","record","start","stop","play","playPromise","pause","name","message","clear","load","speed","relativeSpeed","playbackRate","TempoButton","tempoPlayer","tempo","bpms","handleDoubleClick","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","shift","onDoubleClick","ClearAllButton","LoopButton","checkSoundMethodToCall","Promise","resolve","reject","audioManager","Error","handleSingleClick","methodToCall","newModes","currentMode","modes","prevMode","pop","unshift","id","loopButtonStyle","toConsumableArray","initialModes","_this2","shouldPlayAll","shouldClearAll","App","playPauseAll","clearAll","loop_button_ids","components_PlayAllButton","components_TempoButton","components_ClearAllButton","map","index","components_LoopButton","key","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.e9535232.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"normal\":\"controlButton_normal__20N-_\",\"clicked\":\"controlButton_clicked__3RFJz\"};","module.exports = __webpack_public_path__ + \"static/media/tamborine_100bpm.c6436106.mp3\";","import React from \"react\"\r\nimport buttonStyle from \"../styles/modules/controlButton.module.css\"\r\n\r\nclass PlayAllButton extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tstyle: buttonStyle.normal,\r\n\t\t\tmode: \"Play All\"\r\n\t\t}\r\n\t}\r\n\r\n\thandleClick = () => {\r\n\t\tthis.props.handleClick()\r\n\t\tthis.setState(currentState => ({\r\n\t\t\tstyle:\r\n\t\t\t\tcurrentState.style === buttonStyle.normal\r\n\t\t\t\t\t? buttonStyle.clicked\r\n\t\t\t\t\t: buttonStyle.normal,\r\n\t\t\tmode: currentState.mode === \"Play All\" ? \"Pause All\" : \"Play All\"\r\n\t\t}))\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(newProps) {\r\n\t\tif (newProps.reset) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tstyle: buttonStyle.normal,\r\n\t\t\t\tmode: \"Play All\"\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<button\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tclassName={this.state.style}\r\n\t\t\t\tonClick={this.handleClick}>\r\n\t\t\t\t{this.state.mode}\r\n\t\t\t</button>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default PlayAllButton\r\n","import tempoAudio from \"../assets/tamborine_100bpm.mp3\"\r\n\r\nclass Sound {\r\n\tconstructor(shouldPlayMetronome) {\r\n\t\tthis.recorder = null\r\n\t\tthis.audioChunks = []\r\n\t\tthis.audio = new Audio()\r\n\t\tthis.audioSrc = null\r\n\t\tthis.playPromise = null\r\n\t\tthis.initialize(shouldPlayMetronome)\r\n\t}\r\n\r\n\tinitialize = shouldPlayMetronome => {\r\n\t\tif (shouldPlayMetronome) {\r\n\t\t\tthis.audio = new Audio(tempoAudio)\r\n\t\t} else {\r\n\t\t\tnavigator.mediaDevices\r\n\t\t\t\t.getUserMedia({ audio: true })\r\n\t\t\t\t.then(audioStream => {\r\n\t\t\t\t\tthis.recorder = new MediaRecorder(audioStream)\r\n\t\t\t\t\tthis.recorder.ondataavailable = e => {\r\n\t\t\t\t\t\tthis.audioChunks.push(e.data)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.recorder.onstop = () => {\r\n\t\t\t\t\t\tconst audioBlob = new Blob(this.audioChunks)\r\n\t\t\t\t\t\tconst audioUrl = URL.createObjectURL(audioBlob)\r\n\t\t\t\t\t\tconsole.log(audioBlob, audioUrl)\r\n\t\t\t\t\t\tthis.audio.src = this.audioSrc = audioUrl\r\n\t\t\t\t\t\tthis.audio.loop = true\r\n\t\t\t\t\t\tthis.audioChunks = []\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(e => console.log(e))\r\n\t\t}\r\n\t}\r\n\r\n\trecord = () => {\r\n\t\tthis.recorder.start()\r\n\t}\r\n\r\n\tstop = () => {\r\n\t\tthis.recorder.stop()\r\n\t}\r\n\r\n\tplay = () => {\r\n\t\tthis.playPromise = this.audio.play()\r\n\t\treturn this.playPromise\r\n\t}\r\n\r\n\tpause = () => {\r\n\t\tthis.playPromise\r\n\t\t\t.then(() => this.audio.pause())\r\n\t\t\t.catch(e => console.log(e.name + \": \" + e.message))\r\n\t}\r\n\r\n\tclear = () => {\r\n\t\tthis.audio.src = null\r\n\t}\r\n\r\n\tload = () => {\r\n\t\tthis.audio.load()\r\n\t}\r\n\r\n\ttempo(speed) {\r\n\t\tlet relativeSpeed = speed / 100\r\n\t\tconsole.log(relativeSpeed)\r\n\t\tthis.audio.playbackRate = relativeSpeed\r\n\t}\r\n}\r\n\r\nexport { Sound }\r\n","import React from \"react\"\r\nimport buttonStyle from \"../styles/modules/controlButton.module.css\"\r\nimport { Sound } from \"../modules/Sound\"\r\n\r\nclass TempoButton extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tstyle: buttonStyle.normal,\r\n\t\t\tbpms: [100, 120, 140, 60, 80]\r\n\t\t}\r\n\t\tthis.tempoPlayer = new Sound(true)\r\n\t}\r\n\r\n\thandleClick = () => {\r\n\t\tthis.setState(currentState => ({\r\n\t\t\tstyle:\r\n\t\t\t\tcurrentState.style === buttonStyle.normal\r\n\t\t\t\t\t? buttonStyle.clicked\r\n\t\t\t\t\t: buttonStyle.normal\r\n\t\t\t// bpms: currentState.bpms\r\n\t\t}))\r\n\t\tif (this.state.style === buttonStyle.normal)\r\n\t\t\tthis.tempoPlayer.play().catch(e => console.log(e.name + \": \" + e.message))\r\n\t\t// Reload metronome audio\r\n\t\telse {\r\n\t\t\tthis.tempoPlayer.load()\r\n\t\t\tthis.tempoPlayer.tempo(this.state.bpms[0])\r\n\t\t}\r\n\t}\r\n\r\n\thandleDoubleClick = async () => {\r\n\t\tawait this.setState(currentState => {\r\n\t\t\tcurrentState.bpms.push(currentState.bpms.shift())\r\n\t\t\treturn {\r\n\t\t\t\tstyle: buttonStyle.normal,\r\n\t\t\t\tbpms: currentState.bpms\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.tempoPlayer.load()\r\n\t\tthis.tempoPlayer.tempo(this.state.bpms[0])\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<button\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tclassName={this.state.style}\r\n\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\tonDoubleClick={this.handleDoubleClick}>\r\n\t\t\t\tTempo\r\n\t\t\t\t<p>{this.state.bpms[0]}</p>\r\n\t\t\t</button>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default TempoButton\r\n","import React from \"react\"\r\nimport buttonStyle from \"../styles/modules/controlButton.module.css\"\r\n\r\nclass ClearAllButton extends React.Component {\r\n\thandleClick = () => {\r\n\t\tthis.props.handleClick()\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<button\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tclassName={buttonStyle.normal}\r\n\t\t\t\tonClick={this.handleClick}>\r\n\t\t\t\tClear All\r\n\t\t\t</button>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default ClearAllButton\r\n","import React from \"react\"\r\nimport { Sound } from \"../modules/Sound\"\r\nimport loopButtonStyle from \"../styles/modules/loopButton.module.css\"\r\n\r\nclass LoopButton extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.initialModes = [\"Record\", \"Stop\", \"Play\", \"Pause\"]\r\n\t\tthis.audioManager = new Sound()\r\n\t\tthis.state = {\r\n\t\t\tstyle: loopButtonStyle.normal,\r\n\t\t\tmodes: [...this.initialModes],\r\n\t\t\tmode: this.initialModes[0]\r\n\t\t}\r\n\t}\r\n\r\n\tcheckSoundMethodToCall = () => {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif (this.state.mode === \"Record\") resolve(this.audioManager.record)\r\n\t\t\telse if (this.state.mode === \"Stop\") resolve(this.audioManager.stop)\r\n\t\t\telse if (this.state.mode === \"Play\") resolve(this.audioManager.play)\r\n\t\t\telse if (this.state.mode === \"Pause\") resolve(this.audioManager.pause)\r\n\t\t\telse reject(Error(\"Error: Incorrect Button Mode\"))\r\n\t\t})\r\n\t}\r\n\r\n\thandleSingleClick = () => {\r\n\t\tthis.checkSoundMethodToCall()\r\n\t\t\t.then(methodToCall => methodToCall())\r\n\t\t\t.catch(e => console.log(e.name + \": \" + e.message))\r\n\t\tthis.setState(currentState => {\r\n\t\t\t// Change previous modes ie. shift them to the left\r\n\t\t\t// by 1 position in a circular manner\r\n\t\t\tlet newModes\r\n\t\t\tlet currentMode = currentState.modes.shift()\r\n\t\t\tif (currentMode !== \"Pause\") {\r\n\t\t\t\t// Remove 1st element and add it to the end\r\n\t\t\t\tcurrentState.modes.push(currentMode)\r\n\t\t\t\tnewModes = currentState.modes\r\n\t\t\t} else {\r\n\t\t\t\t// Remove last element and add it to the beginning\r\n\t\t\t\tlet prevMode = currentState.modes.pop()\r\n\t\t\t\tcurrentState.modes.unshift(currentMode)\r\n\t\t\t\tcurrentState.modes.unshift(prevMode)\r\n\t\t\t\tnewModes = currentState.modes\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tid: currentState.id,\r\n\t\t\t\tstyle:\r\n\t\t\t\t\tcurrentState.style === loopButtonStyle.normal\r\n\t\t\t\t\t\t? loopButtonStyle.clicked\r\n\t\t\t\t\t\t: loopButtonStyle.normal,\r\n\t\t\t\tmodes: newModes,\r\n\t\t\t\tmode: newModes[0]\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\thandleDoubleClick = () => {\r\n\t\tthis.audioManager.clear()\r\n\t\tthis.setState(() => ({\r\n\t\t\tstyle: loopButtonStyle.normal,\r\n\t\t\tmodes: [...this.initialModes],\r\n\t\t\tmode: this.initialModes[0]\r\n\t\t}))\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(newProps) {\r\n\t\tif (newProps.shouldPlayAll) {\r\n\t\t\tthis.setState(() => ({\r\n\t\t\t\tstyle: loopButtonStyle.clicked,\r\n\t\t\t\tmodes: [\"Pause\", \"Record\", \"Stop\", \"Play\"],\r\n\t\t\t\tmode: \"Pause\"\r\n\t\t\t}))\r\n\t\t\t// catch below is required to catch\r\n\t\t\t// DOMEcxeption: The play() request was interrupted\r\n\t\t\t// audio.play() returns a promise which throws the error when rejected\r\n\t\t\t// https://goo.gl/LdLk22 (More on this error)\r\n\t\t\tif (this.audioManager.audioSrc !== null) {\r\n\t\t\t\tthis.audioManager\r\n\t\t\t\t\t.play()\r\n\t\t\t\t\t.catch(e => console.log(e.name + \": \" + e.message))\r\n\t\t\t}\r\n\t\t} else if (\r\n\t\t\t!newProps.shouldPlayAll &&\r\n\t\t\tthis.state.mode !== \"Record\" &&\r\n\t\t\t!newProps.shouldClearAll\r\n\t\t) {\r\n\t\t\tthis.setState(() => ({\r\n\t\t\t\tstyle: loopButtonStyle.normal,\r\n\t\t\t\tmodes: [\"Play\", \"Pause\", \"Record\", \"Stop\"],\r\n\t\t\t\tmode: \"Play\"\r\n\t\t\t}))\r\n\t\t\t// Fix to the error mentioned above\r\n\t\t\t// Old code: this.audioManager.pause()\r\n\t\t\tif (this.audioManager.audioSrc !== null) {\r\n\t\t\t\tthis.audioManager\r\n\t\t\t\t\t.play()\r\n\t\t\t\t\t.then(() => this.audioManager.pause())\r\n\t\t\t\t\t.catch(e => console.log(e.name + \": \" + e.message))\r\n\t\t\t}\r\n\t\t} else if (newProps.shouldClearAll) {\r\n\t\t\tthis.handleDoubleClick()\r\n\t\t}\r\n\t}\r\n\r\n\t// Lifecycle method below keeps updating until maximum stack depth is reached\r\n\t// if setState() is used as it keeps calling itself (until max recursion depth)\r\n\t// componentDidUpdate() {\r\n\t// \tif (this.props.shouldPlayAll) {\r\n\t// \t\tthis.audioManager.play()\r\n\t// \t} else {\r\n\t// \t\tthis.audioManager.pause()\r\n\t// \t}\r\n\t// \tif (this.props.shouldClearAll) {\r\n\t// \t\tthis.audioManager.clear()\r\n\t// \t}\r\n\t// }\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<button\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tclassName={this.state.style}\r\n\t\t\t\tonClick={this.handleSingleClick}\r\n\t\t\t\tonDoubleClick={this.handleDoubleClick}>\r\n\t\t\t\t{this.state.mode}\r\n\t\t\t</button>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default LoopButton\r\n","import React from \"react\"\r\nimport PlayAllButton from \"./components/PlayAllButton\"\r\nimport TempoButton from \"./components/TempoButton\"\r\nimport ClearAllButton from \"./components/ClearAllButton\"\r\nimport LoopButton from \"./components/LoopButton\"\r\nimport \"./styles/index.css\"\r\n\r\nclass App extends React.Component {\r\n\tconstructor() {\r\n\t\tsuper()\r\n\t\tthis.loop_button_ids = [1, 2, 3, 4]\r\n\t\tthis.state = {\r\n\t\t\tshouldPlayAll: false,\r\n\t\t\tshouldClearAll: false\r\n\t\t}\r\n\t}\r\n\r\n\tplayPauseAll = () => {\r\n\t\tthis.setState(currentState => ({\r\n\t\t\tshouldPlayAll: !currentState.shouldPlayAll,\r\n\t\t\tshouldClearAll: false\r\n\t\t}))\r\n\t}\r\n\r\n\tclearAll = () => {\r\n\t\tthis.setState(currentState => ({\r\n\t\t\tshouldPlayAll: false,\r\n\t\t\tshouldClearAll: !currentState.shouldClearAll\r\n\t\t}))\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div id=\"main-wrapper\">\r\n\t\t\t\t<div id=\"control-buttons-wrapper\">\r\n\t\t\t\t\t<PlayAllButton\r\n\t\t\t\t\t\thandleClick={this.playPauseAll}\r\n\t\t\t\t\t\treset={this.state.shouldClearAll}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<TempoButton />\r\n\t\t\t\t\t<ClearAllButton handleClick={this.clearAll} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id=\"loop-buttons-wrapper\">\r\n\t\t\t\t\t{this.loop_button_ids.map(index => (\r\n\t\t\t\t\t\t<LoopButton\r\n\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\tshouldPlayAll={this.state.shouldPlayAll}\r\n\t\t\t\t\t\t\tshouldClearAll={this.state.shouldClearAll}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default App\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"normal\":\"loopButton_normal__1X08w\",\"clicked\":\"loopButton_clicked__2Dndn\"};"],"sourceRoot":""}